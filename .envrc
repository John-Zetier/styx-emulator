#!/usr/bin/env bash
# Direnv configuration for Nix-based Styx development

# Set STYX_ROOT
export STYX_ROOT="$(pwd)"

# Use flake if available, otherwise fall back to shell.nix
if [ -f "flake.nix" ]; then
    echo "Loading Nix flake environment..."
    use flake
else
    echo "Loading shell.nix environment..."
    use nix
fi

# Additional environment variables (migrated from Guix setup)
export PATH="${STYX_ROOT}/dist/nix/bin:${PATH}"

# Create necessary directories
mkdir -p dist/nix/.links

# Load any local environment overrides
if [ -f ".local.env" ]; then
    echo "Loading local environment overrides..."
    source .local.env
fi

echo "Styx development environment loaded!"
