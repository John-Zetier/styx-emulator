#!/usr/bin/env bash
# Direnv configuration for Nix-based Styx development

export STYX_ROOT="$(pwd)"

if [ -f "flake.nix" ]; then
  echo "Loading Nix flake environment..."
  use flake
else
  echo "Loading shell.nix environment..."
  use nix
fi

# Local bin path (matches Guix-style)
export PATH="${STYX_ROOT}/dist/nix/bin:${PATH}"
mkdir -p dist/nix/.links

# Optional local overrides
[ -f ".local.env" ] && { echo "Loading .local.env..."; source .local.env; }

echo "Styx development environment loaded!"
